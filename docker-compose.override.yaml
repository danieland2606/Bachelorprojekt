version: '3.7'
services:
  swagger-ui:
    image: swaggerapi/swagger-ui
    container_name: swagger_ui_container
    ports:
      - "81:8080"
    volumes:
      - ./Meowmed+_REST.yaml:/usr/share/nginx/html/Meowmed+_REST.yaml
    environment:
      API_URL: ./Meowmed+_REST.yaml
  ui:
    image: meowmed-ui
    build:
      context: ./UI
      target: prod
    env_file:
      - ./UI/.env
      
  policy.rda:
    image: meowmed-policy.rda
    build:
      context: ./RDA/PolicyService
      dockerfile: Dockerfile
    ports:
      - "8082:8080"
  customer.rda:
    image: meowmed-customer.rda
    build:
      context: ./RDA/CustomerService
      dockerfile: Dockerfile
    ports:
      - "8081:8080"
  notification.rda:
    image: meowmed-notification.rda
    build:
      context: ./RDA/NotificationService
      dockerfile: Dockerfile

  customer.eda:
    image: meowmed-customer.eda
    build:
      context: ./EDA/
      dockerfile: ./CustomerService/Dockerfile
      args:
        service: CustomerService
    ports:
      - "8071:8081"
  notification.eda:
    image: meowmed-notification.eda
    build:
      context: ./EDA/
      dockerfile: ./NotificationService/Dockerfile
      args:
        service: NotificationService
  policy.eda:
    build:
      context: ./EDA/
      dockerfile: ./PolicyService/Dockerfile
      args:
        service: PolicyService
    ports:
      - "8072:8080"
